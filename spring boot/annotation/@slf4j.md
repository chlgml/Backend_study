## @slf4j

Spring Boot에서 로그를 남기는 방법중에서 가장 편하게 사용되고 있는 @slf4j에 대해서 설명해볼까 한다. 

일단 어노테이션에서 써져있는 SLF4J란 Simple Logging Facade for Java의 약자로, 다양한 로깅 프레임워크에 대한 추상 인터페이스의 모음이다. (로깅 Facade)  인터페이스를 사용하여 로깅을 구현하면, 추후에 라이브러리를 변형할때 코드의 변경없이 가능하다.



아래와 같이 @slf4j 어노테이션을 사용하면 log변수를 통해 로그를 생성할 수 있다.

![image](https://user-images.githubusercontent.com/81290737/159122276-914d5bb3-c22c-44f9-9639-02d8c69dc017.png)

로깅 레벨 :  trace > warn > info > debug > error

- 로깅 : 시스템 동작 시 시스템 상태나 동작 정보를 시간의 경과에 따라 기록하는 것
  - trace  : 디버그 레벨이 너무 광범위한 것을 해결하기 위해서 좀 더 상세한 이벤트를 나타냄
  - warn : 프로그램 실행에는 문제가 없지만, 향후 시스템 에러의 원인이 도리 수 있는 경소성 메세지를 나타냄
  - info : 어떠한 상태 변경과 같은 정보성 메시지를 나타냄
  - debug : 디버그 용도로 사용하는 메시지를 나타냄



**@slf4j에 대해서 공부하다가 의문점이 들었다. 과연  로그는 언제, 왜 남기는 것일까?**

로그는 로직의 흐름이나, 문제점, 오작동 여부를 확인하는데 도움을 주기 때문에 내 로직의 의도된 바로 흐르는 지, 코드에 잘못된 부분이 없는 지 감지하기 위해서 로그를 남긴다. 오류가 났을 때 그 오류의 원인을 역추적하기 위해서 로그를 남긴다고 보면 된다. 내 코드를 잘 알기 위해 로그를 남긴다고 보면 된다.

- 개발로그 : 개발자가 디버깅 및 흐름을 추적하기 위해 기록하는 내용으로, trace, debug레벨로 기록함
- 운영로그 : 디스크가 꽉찼거나 인터페이싱 과정에서 타입아웃이 발생하는 등 운영을 모니터링하기 위한 용도의 로그로, warn, error 레벨로 기록한다.
- 비지니스 로그 : 비지니스적으로 의미있고 추후 추적하기 위한 로그인다. 장바구니 상품추가, 로그인, 결제등이 대표적이며, info 레벨로 기록한다.
- 감사 로그 : 특정 작업 절차 또는 기록에 언제든지 영향을 미친 활동 순서에 대한 증빙자료를 제공하기 위해 기록된다.  info 레벨로 기록하지만, 운영자가 수정하지 못하는 곳에 저장한다. 



그러면 로그는 언제 어떻게 남겨야 할까?

글을 찾아보니 로그는 최대한 많이 남겨야한다고 한다. 그 다음 불필요한 로그를 제거하거나 레벨을 낮추는 등 상황에 맞도록 바꾸는 작업이 필요하다고 한다.  -> 그래도 로그를 남기면 성능이 저하되기 때문에 필요에 따라 로그를 남겨야한다.

로그에 남기면 좋을 것

- 중요한 기동관련 설명
- 에러와 경고
- DB에 저장해야하는 변경된 데이터
- 주요 시스템간 요청과 응답
- 중요한 상태변화
- 실패할 가능성이 있는 호출
- 오래 걸리는 작업에 대해

로그로 남기지 말아야 할것

- 함수 진입(중요한 함수에 대해서만 기록하거나 디버그 레벨로만 기록)
- 반복문 안의 데이터
- 실제로는 오류가 아닌 오루
- 반복적 오류 (유사하거나 동일한 로그를 반복적으로 기록하게 되면 실제 오류를 숨기게 된다.)

로그를 남길때 주의 할것 

- 날짜와 시간을 남길것

- 거래ID나 주문ID등 왜 그 로그가 나타났는 지에 대한 단서가 필요하다.

- 데이터를 변하는 시점에 로그를 남겨야한다.

  데이터를 변하는 시점에 로그를 남기지 않는다면 변하는 과정에서 에러가 발생하면 왜 왜 에러가 났는 지 찾기 힘들다.



로그는 나중에 보기 위해서 남기는 것이기 때문에 로그를 남길때는 보기 좋게 남겨라.

```java
try {
	...
} catch (Exception e){
	log.Error(e);
}
```

위의 방식대로 로그를 남긴다면 어떤 상황인지 바로 알지 못할것이다.

위의 글만 보면 로그가 오류가 나는 것을 방지하기 위해서 남긴다고 생각하겠지만, 개발자의 입장이 아닌 일반적으로 '로그'에 대해서 생각하면 인터넷에 접속한 기록이라고 생각이 된다. 로그는 즉 기록이다. 이 기록을 어떠한 글을 클릭했을 때의 로그를 생성해 놨다면 인기글을 알 수 있을 것이다. 어떠한 사용자가 어떠한 글을 좋아하는 지 로그를 남김으로써 더 좋은 서비스를 만들 수 있도록 도와준다. -> 분석을 통해 통계를 낼 수도 있다.